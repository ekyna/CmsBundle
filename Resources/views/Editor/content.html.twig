{% block attributes %}
    {%- for attrname, attrvalue in attr.toArray %}
        {% if attrname == 'data' %}
            data-cms='{{ attrvalue|json_encode }}'
        {% else %}
            {{ attrname }}="{{ attrvalue }}"
        {% endif %}
    {% endfor -%}
{% endblock attributes %}

{% block cms_content %}
{% apply spaceless %}
    {% set attr = content.attributes %}
    <div{{ block('attributes') }}>
        {% for container in content.containers %}
            {{ cms_container(container) }}
        {% endfor %}
    </div>
{% endapply %}
{% endblock cms_content %}

{% block cms_container %}
{% apply spaceless %}
    {% set attr = container.attributes %}
    <div{{ block('attributes') }}>
        {{ container.content|raw }}
        {% set attr = container.innerAttributes %}
        <div{{ block('attributes') }}>
            {{ container.innerContent|raw }}
            {% for row in container.rows %}
                {{ cms_row(row) }}
            {% endfor %}
        </div>
    </div>
{% endapply %}
{% endblock cms_container %}

{% block cms_row %}
{% apply spaceless %}
    {% set attr = row.attributes %}
    <div{{ block('attributes') }}>
        {% for block in row.blocks %}
            {% set attr = block.attributes %}
            <div{{ block('attributes') }}>
                 {{ cms_block(block) }}
            </div>
        {% endfor %}
    </div>
{% endapply %}
{% endblock cms_row %}

{% block cms_block %}
{% apply spaceless %}
    {% for widget in block.widgets %}
        {% set attr = widget.attributes %}
        <div{{ block('attributes') }}>
            {{ widget.content|raw }}
        </div>
    {% endfor %}
{% endapply %}
{% endblock cms_block %}


