{% extends '@EkynaAdmin/Entity/Crud/read.html.twig' %}


{% block actions %}
    {{ admin_resource_btn(context.config.id, 'Ekyna\\Bundle\\AdminBundle\\Action\\ListAction') }}
{% endblock %}


{% block main_actions -%}
    {% if not page.dynamicPath %}
        {{ admin_resource_btn(page, 'public') }}
        {{ admin_resource_btn(page, 'editor') }}
    {% endif %}
    {{ parent() }}
{%- endblock main_actions %}


{% block main_tabs -%}
    <li class="active">
        <a href="#{{ resource_name }}-general" id="toggle-general" data-toggle="tab">
            {{- 'field.general'|trans({}, 'EkynaUi') -}}
        </a>
    </li>
    <li>
        <a href="#{{ resource_name }}-seo" id="toggle-seo" data-toggle="tab">
            {{- 'field.seo'|trans({}, 'EkynaUi') -}}
        </a>
    </li>
{%- endblock main_tabs %}


{% block main_contents -%}
    <div class="tab-pane active" id="{{ resource_name }}-general">
        {{ show_row(page.name, 'text', {
            'label': t('field.name', {}, 'EkynaUi')
        }) }}
        {{ show_row(page.parent, 'resource', {
            'resource': 'ekyna_cms.page'
        }) }}
        {{ show_row(page.enabled, 'boolean', {
            'label': t('field.enabled', {}, 'EkynaUi')
        }) }}

        {% if not page.static -%}
            {{ show_row(cms_page_controller(page.controller), 'text', {
                'label': t('page.field.controller', {}, 'EkynaCms')
            }) }}
            {{ show_row(page.template, 'text', {
                'label': t('page.field.template', {}, 'EkynaCms')
            }) }}
        {%- endif %}

        {% if page.advanced -%}
            {{ show_row(page.translations, 'translations', {
                'fields': {
                    'title': {
                        'label': t('field.title', {}, 'EkynaUi')
                    },
                    'breadcrumb': {
                        'label': t('field.breadcrumb', {}, 'EkynaUi')
                    },
                    'path': {
                        'label': t('field.url', {}, 'EkynaUi')
                    }
                }
            }) }}
        {%- else -%}
            {{ show_row(page.translations, 'translations', {
                'fields': {
                    'title': {
                        'label': t('field.title', {}, 'EkynaUi')
                    },
                    'breadcrumb': {
                        'label': t('field.breadcrumb', {}, 'EkynaUi')
                    },
                    'path': {
                        'label': t('field.url', {}, 'EkynaUi')
                    },
                    'html': {
                        'label': t('field.content', {}, 'EkynaUi'),
                        'type': 'tinymce',
                        'property_path': null,
                        'options': {
                            'field': 'html'
                        }
                    }
                }
            }) }}
        {%- endif %}
    </div>
    <div class="tab-pane" id="{{ resource_name }}-seo">
        {{ show_row(page.seo, 'seo') }}
    </div>
{%- endblock main_contents -%}
