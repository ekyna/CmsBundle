!function(a,b){"use strict";"undefined"!=typeof module&&module.exports?module.exports=b(require("jquery"),require("routing"),require("ekyna-cms/cookie"),require("ekyna-cms-editor")):"function"==typeof define&&define.amd?define("ekyna-cms/user",["jquery","routing","ekyna-cms/cookie","ekyna-cms-editor"],function(a,c,d,e){return b(a,c,d,e)}):a.EkynaCmsUser=b(a.jQuery,a.Routing,a.EkynaCmsCookie,a.EkynaCmsEditor)}(this,function(a,b,c,d){"use strict";var e=function(){};return e.prototype={constructor:e,init:function(){var d=a("#cms-flashes");a.ajax({url:b.generate("ekyna_cms_init"),data:{flashes:d.length>0?1:0,editor:a(".cms-editor-block").length>0?1:0,cookie:c.consentRequired()?1:0},dataType:"xml",type:"POST"}).done(function(e){var f=a(e);if(d.length>0){var g=f.find("flashes");g.size()>0&&d.html(g.text())}var h=f.find("cookie");1==h.length&&("disabled"==h.attr("disabled")?c.saveUserPreference():"header"==h.attr("mode")?c.showCookieConsentBar(h.text(),h.attr("close"),h.attr("learn"),b.generate("cookies_privacy_policy")):c.showCookieConsentDialog(h.text(),h.attr("close"),h.attr("learn"),b.generate("cookies_privacy_policy")))})}},new e});