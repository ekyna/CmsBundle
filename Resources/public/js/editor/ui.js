var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define(["require","exports","backbone","underscore","./dispatcher"],function(a,b,c,d,e){"use strict";var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){return{name:null,title:null,size:"sm",theme:"default",icon:null,active:!1,disabled:!1,spinning:!1,rotate:!1,event:null,data:{}}},b.prototype.validate=function(a,b){if(a=a||this.attributes,0==String(a.name).length)throw"Button.name is mandatory";if(0==String(a.event).length)throw"Button.event is mandatory"},b.prototype.activate=function(){return this.set("active",!0),this},b.prototype.deactivate=function(){return this.set("active",!1),this},b.prototype.startSpinning=function(){return this.set("spinning",!0),this},b.prototype.stopSpinning=function(){return this.set("spinning",!1),this},b.prototype.enable=function(){return this.set("disabled",!1),this},b.prototype.disable=function(){return this.set("disabled",!0),this},b}(c.Model);b.Button=f;var g=function(a){function b(b){b.tagName="button",b.attributes={type:"button","class":"btn"},a.call(this,b),this.template=d.template('<span class="fa fa-<%= icon %>"></span>'),this.listenTo(this.model,"change",this.render)}return __extends(b,a),b.prototype.events=function(){return{click:"onClick"}},b.prototype.onClick=function(){e["default"].trigger(this.model.get("event"),this.model)},b.prototype.render=function(){return this.$el.html(this.template({icon:this.model.get("icon")})).addClass("btn-"+this.model.get("size")).addClass("btn-"+this.model.get("theme")).attr("title",this.model.get("title")),this.$el.prop("disabled",this.model.get("disabled")),this.$el.toggleClass("active",this.model.get("active")),this.$el.toggleClass("rotate",this.model.get("rotate")),this.$("span").toggleClass("fa-spin",this.model.get("spinning")),this},b}(c.View);b.ButtonView=g;var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){return{name:null,buttons:new c.Collection}},b.prototype.addButton=function(a){return this.get("buttons").add(a),this},b.prototype.getButton=function(a){return this.get("buttons").findWhere({name:a})},b}(c.Model);b.ButtonGroup=h;var i=function(a){function b(b){b.tagName="div",b.attributes={"class":"btn-group"},a.call(this,b),this.subViews=[],this.listenTo(this.model,"add remove",this.render)}return __extends(b,a),b.prototype.clear=function(){this.subViews.forEach(function(a){return a.remove()})},b.prototype.render=function(){var a=this;return this.clear(),this.model.get("buttons").each(function(b){var c=new g({model:b});a.$el.append(c.render().$el),a.subViews.push(c)}),this},b.prototype.remove=function(){return this.clear(),a.prototype.remove.call(this),this},b}(c.View);b.ButtonGroupView=i;var j=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.defaults=function(){return{id:null,type:"vertical",origin:{top:0,left:0},groups:new c.Collection}},b.prototype.hasGroup=function(a){return-1<this.get("groups").findIndex(function(b){return b.get("name")===a})},b.prototype.addGroup=function(a){return this.get("groups").add(a),this},b.prototype.getGroup=function(a){return this.get("groups").findWhere({name:a})},b.prototype.addButton=function(a,b){return this.hasGroup(a)||this.addGroup(new h({name:a})),this.getGroup(a).addButton(b),this},b.prototype.getButton=function(a,b){return this.getGroup(a).getButton(b)},b}(c.Model);b.Toolbar=j;var k=function(a){function b(b){b.tagName="div",b.attributes={"class":"editor-toolbar "+b.model.get("type")},0<String(b.model.get("id")).length&&d.extend(b.attributes,{id:b.model.get("id")}),a.call(this,b),this.subViews=[]}return __extends(b,a),b.prototype.clear=function(){this.subViews.forEach(function(a){return a.remove()})},b.prototype.applyOriginOffset=function(a){return this.$el.css({top:a.top+this.model.get("origin").top,left:a.left+this.model.get("origin").left}),this},b.prototype.render=function(){var a=this;return this.clear(),this.model.get("groups").each(function(b){var c=new i({model:b});a.$el.append(c.render().$el),a.subViews.push(c)}),this.$el.css(this.model.get("origin")),this},b.prototype.remove=function(){return this.clear(),a.prototype.remove.call(this),this},b}(c.View);b.ToolbarView=k});