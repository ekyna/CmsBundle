define(["require","exports","jquery","./dispatcher","./controls","./viewport","./document-manager"],function(a,b,c,d,e,f,g){"use strict";var h={hostname:"sf.jessie2.dev",path:"/app_dev.php/",viewports:[{width:320,height:568,icon:"mobile",title:"Smartphone (320x568)",name:"Smartphone"},{width:768,height:1024,icon:"tablet",title:"Tablet (768x1024)",name:"Tablet"},{width:1280,height:800,icon:"laptop",title:"Laptop (1280x800)",name:"Laptop"},{width:1920,height:1080,icon:"desktop",title:"Desktop (1920x1080)",name:"Desktop"},{width:0,height:0,icon:"arrows-alt",title:"Adjust to screen",name:"Adjust",active:!0}],plugins:{block:[{name:"ekyna_block_tinymce",title:"Html",path:"ekyna-cms/editor/plugin/block/tinymce"},{name:"ekyna_block_image",title:"Image",path:"ekyna-cms/editor/plugin/block/image"}],container:[{name:"ekyna_container_background",title:"Background",path:"ekyna-cms/editor/plugin/container/background"}]}};g.PluginManager.load(h.plugins);var i=new g.DocumentManager(h.hostname);i.initialize();var j=new e.MainToolbarView({model:new e.MainToolbar({id:"editor-control-bar",classes:["horizontal"]},{viewports:h.viewports})});c("[data-controls-placeholder]").replaceWith(j.render().$el);var k=new f.ViewportView({model:new f.ViewportModel});c("[data-viewport-placeholder]").replaceWith(k.render().$el),d["default"].on("document_manager.navigate",k.onDocumentManagerNavigateHandler),d["default"].on("controls.power.click",i.powerClickHandler),d["default"].on("controls.reload.click",k.onControlsReloadClickHandler),d["default"].on("controls.viewport.click",k.onControlsViewportClickHandler),d["default"].on("viewport_iframe.unload",i.viewportUnloadHandler),d["default"].on("viewport_iframe.unload",function(a){return j.setBusy(a)}),d["default"].on("viewport_iframe.load",i.viewportLoadHandler),d["default"].on("viewport_iframe.load",function(){return j.unsetBusy()}),k.initIFrame(h.path)});