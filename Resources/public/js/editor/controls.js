var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();define(["require","exports","underscore","./dispatcher","./ui"],function(d,t,n,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainToolbarView=t.MainToolbar=void 0;r=i.Toolbar,__extends(c,r),c.prototype.initialize=function(t,e){var o=this;if(r.prototype.initialize.call(this,t,e),this.addControl("default",new i.Button({name:"power",title:"Toggle editor on/off",size:"md",theme:"primary",icon:"power",event:"controls.power.click"})),this.addControl("default",new i.Button({name:"reload",title:"Reload the page",size:"md",theme:"default",icon:"reload",event:"controls.reload.click",spinning:!0})),!e.viewports||0==e.viewports.length)throw"Viewport buttons are not configured";if(n.forEach(e.viewports,function(t){o.addControl("viewport",new i.Button({name:t.name,title:t.title+(t.width?" ("+t.width+"x"+t.height+")":""),size:"md",icon:t.icon,event:"controls.viewport.click",rotate:!1,active:t.active,data:{width:t.width,height:t.height}}))}),!e.locales||0==e.locales.length)throw"Locale buttons are not configured";this.addControl("document",new i.Select({name:"locale",title:"Select the locale",event:"controls.locale.change",choices:e.locales})),this.addControl("document",new i.Select({name:"page",title:"Select the page",event:"controls.page.change",choices:[],width:250})),this.addControl("document",new i.Button({name:"edit-page",title:"Edit the page",size:"md",theme:"warning",icon:"edit-page",event:"controls.edit_page.click"})),this.addControl("document",new i.Button({name:"new-page",title:"Create a new page",size:"md",theme:"success",icon:"new-page",event:"controls.new_page.click"}))};var r,o=c;function c(){return null!==r&&r.apply(this,arguments)||this}t.MainToolbar=o;a=i.ToolbarView,__extends(l,a),l.prototype.initialize=function(t){var o=this;e.default.on("controls.power.click",function(t){t.set("active",!t.get("active"))}),e.default.on("controls.viewport.click",function(e){o.model.getGroup("viewport").get("controls").reject(function(t){return t==e}).forEach(function(t){return t.deactivate()}),e.get("active")?"Adjust"!=e.get("name")&&e.set("rotate",!e.get("rotate")):e.set("active",!0)})},l.prototype.position=function(t){},l.prototype.getLocaleSelect=function(){return this.model.getControl("document","locale")},l.prototype.getPageSelect=function(){return this.model.getControl("document","page")},l.prototype.getNewPageButton=function(){return this.model.getControl("document","new-page")},l.prototype.getEditPageButton=function(){return this.model.getControl("document","edit-page")};var a,o=l;function l(t){t=a.call(this,t)||this;return t.template=n.template('\n            <div id="editor-control-main" class="btn-group"></div>\n            <div id="editor-control-viewport" class="btn-group"></div>\n        '),t}t.MainToolbarView=o});