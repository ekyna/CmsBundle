var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define(["require","exports","jquery","es6-promise","routing","ekyna-modal","../base-plugin","../../document-manager"],function(a,b,c,d,e,f,g,h){"use strict";d.polyfill();var i=d.Promise,j=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.edit=function(){var a=this,b=this.$element.data("cms").id;if(!b)throw"Invalid block id";this.modal=new f,this.modal.load({url:e.generate("ekyna_cms_editor_block_edit",{blockId:b}),method:"GET"}),c(this.modal).on("ekyna.modal.response",function(b){"json"==b.contentType&&(b.content.hasOwnProperty("blocks")&&h.BlockManager.parse(b.content.blocks),a.modal.close())})},b.prototype.save=function(){return new i(function(a,b){a()})},b.prototype.destroy=function(){var a=this;return this.save().then(function(){a.modal&&(a.modal.close(),a.modal=null)})},b.prototype.focus=function(){},b.prototype.preventDocumentSelection=function(a){return!1},b}(g.BasePlugin);return j});